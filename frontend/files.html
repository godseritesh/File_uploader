<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Uploaded Files</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="container card">
        <header class="header">
            <img src="https://img.icons8.com/fluency/48/upload.png" alt="Upload Icon" width="48" height="48"/>
            <h1>Uploaded Files</h1>
        </header>
        <main>
            <table id="filesTable" aria-label="Uploaded files table">
                <thead>
                    <tr>
                        <th>Original Filename</th>
                        <th>Size (KB)</th>
                        <th>Uploaded At</th>
                    </tr>
                </thead>
                <tbody></tbody>
            </table>
            <div id="emptyState" style="display:none; color:#888; margin:1.5rem 0;">No files uploaded yet.</div>
            <div class="actions">
                <a href="index.html" class="link-btn cta">Back to Upload</a>
            </div>
        </main>
        <footer class="footer">
            <span>Created by Ritesh Sanjay Godse | <a href="https://shorturl.at/7l10g" target="_blank" rel="noopener">Resume</a></span>
        </footer>
    </div>
    <script>
    (function() {
        let page = 1;
        const pageSize = 10;
        async function fetchFiles() {
            const response = await fetch(`http://localhost:8000/files?page=${page}&page_size=${pageSize}`);
            const data = await response.json();
            const files = data.files;
            const tbody = document.querySelector('#filesTable tbody');
            const emptyState = document.getElementById('emptyState');
            tbody.innerHTML = '';
            if (!files || files.length === 0) {
                document.getElementById('filesTable').style.display = 'none';
                emptyState.style.display = 'block';
            } else {
                document.getElementById('filesTable').style.display = '';
                emptyState.style.display = 'none';
                files.forEach(file => {
                    const tr = document.createElement('tr');
                    tr.innerHTML = `
                        <td><span class="file-icon">ðŸ“„</span> ${file.original_filename}</td>
                        <td>${(file.file_size_bytes / 1024).toFixed(2)}</td>
                        <td>${file.uploaded_at}</td>
                    `;
                    tbody.appendChild(tr);
                });
            }
        }
        window.onload = fetchFiles;
    })();
    </script>
</body>
</html>
